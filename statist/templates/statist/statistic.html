{% extends 'base.html' %}
{% load static %}



{% block content %}
<script src="{% static 'js/index.js' %}"></script>
<script src="{% static 'js/plus-minus.js' %}"></script>

<h1>Подсчет статистики:</h1>

<form action="{% url 'statistic:result' %}" method="post">
    {% csrf_token %}
<table>
    <tr>
        {% for f in form %}
           <th>
               {{ f.label }}
           </th>
        {% endfor %}
    </tr>

    <tr class="field-row" style="display:none;">
        {% for f in form %}
            <td class="field">{{ f }}</td>
        {% endfor %}
        <td><span class="add-player" onclick="addPlayer(this)">+</span>

        <span class="remove-player" onclick="removePlayer(this)">-</span>
        </td>
    </tr>

</table>
<input type="hidden" name="statistic_type" value="{{ statistic_type }}">
    <label class="switch">
  <input onclick="checkboxOn(this)" type="checkbox">
  <span class="slider round"></span>
</label>
<input type="submit" value="Подтвердить">
</form>




<script>
    const t = document.querySelector('input[type="checkbox"]')
    console.log(t.checked)
    const form = document.forms[0]
    function submit(e) {
        e.preventDefault();
        const myDiv = document.querySelectorAll('.field-row')[0]

        // myDiv.removeAttribute('name')
        const fields =  myDiv.querySelectorAll('input')
        for (let field of fields ) {
            field.removeAttribute('name')
        }

            form.submit()
        }

    let button = document.querySelector('[type="submit"]')
    console.log(button)
    button.addEventListener('click', submit)
</script>


<script>

    addPlayer()




    // checkbox
    function eventCount(event) {
        console.log(event.target)
        // console.log(element.value)
        event.target.value ++
    }

    function checkboxOn(element) {
        const inputs = document.querySelectorAll('input[type="number"]');
        if (element.checked) {
            inputs.forEach((element) => {
                element.addEventListener('click', eventCount)
            })
        } else {
            console.log('you ar here')
            inputs.forEach((element) => {
                element.removeEventListener('click', eventCount, false)
            })
        }
    }


</script>



{% endblock %}
