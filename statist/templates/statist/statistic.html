{% extends 'base.html' %}
{% load static %}



{% block content %}
<script src="{% static 'js/index.js' %}"></script>
<script src="{% static 'js/plus-minus.js' %}"></script>

<h1>Подсчет статистики:</h1>
<div class="checkbox-wrapper-8">
  <input onclick="checkboxOn(this)" class="tgl tgl-skewed" id="cb3-8" type="checkbox"/>
  <label class="tgl-btn" data-tg-off="OFF" data-tg-on="ON" for="cb3-8"></label>
</div>

<form action="{% url 'statistic:result' %}" method="post">
    {% csrf_token %}
<table>
    <tr>
        <th class="head">
            Имя игрока
        </th>
        {% for act in actions %}
           <th class="head">
               {{ act }}
           </th>
        {% endfor %}
    </tr>

    <tr class="field-row" style="display:none;">
        <td class="field">
        <input type="text" name="name">
        </td>
        {% for act in actions %}
            <td class="field"><input class="success"  name="{{ act.slug }}-uspeshno" type="number" value="0">
                <input class="fail" name="{{ act.slug }}-oshibka" type="number" value="0">
            </td>
        {% endfor %}
        <td><span class="add-player" onclick="addPlayer(this)">+</span>

        <span class="remove-player" onclick="removePlayer(this)">-</span>
        </td>
    </tr>

</table>
<input type="hidden" name="statistic_type" value="{{ statistic_type }}">

<input type="submit" value="Подтвердить">
</form>




<script>
    // const t = document.querySelector('input[type="checkbox"]')
    //
    // console.log(t.checked)
    const form = document.forms[0]
    function submit(e) {
        e.preventDefault();
        const myDiv = document.querySelectorAll('.field-row')[0]

        // myDiv.removeAttribute('name')
        const fields =  myDiv.querySelectorAll('input')
        for (let field of fields ) {
            field.removeAttribute('name')
        }

            form.submit()
        }

    let button = document.querySelector('[type="submit"]')
    console.log(button)
    button.addEventListener('click', submit)
</script>


<script>

    addPlayer()




    // checkbox
    function eventCount(event) {
        console.log(event.target)

        event.target.value ++
    }

    function checkboxOn(element) {
        const inputs = document.querySelectorAll('input[type="number"]');
        if (element.checked) {
            inputs.forEach((element) => {
                element.style.cursor = 'pointer'
                element.addEventListener('click', eventCount)
            })
        } else {
            inputs.forEach((element) => {
                element.style.cursor = 'text'
                element.removeEventListener('click', eventCount, false)
            })
        }
    }


</script>



{% endblock %}
