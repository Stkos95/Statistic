{% extends 'base.html' %}
{% load static %}



{% block content %}
<script src="{% static 'js/index.js' %}"></script>
<script src="{% static 'js/plus-minus.js' %}"></script>

<h1>Подсчет статистики:</h1>
<div class="statistic">
    <form action="{% url 'statistic:result' %}" method="post">
        {% csrf_token %}
        <div class="player-form">
            <div class="fields">
        {% for field in form %}
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}



        {% endfor %}

        </div>
        <span class="add-player" onclick="addPlayer(this)">+</span>
        <span class="remove-player" onclick="removePlayer(this)">-</span>
        </div>

    <input type="submit" value="Подтвердить">
    </form>

</div>


<script>
    const form = document.forms[0]
    function submit(e) {
        e.preventDefault()
        let players = document.querySelectorAll('div.player')
        for ( let player of players) {
            let playerName = player.querySelector('h5').textContent
            let fields = player.querySelectorAll('input')
                for (let field of fields) {
                    let name = field.name
                    field.setAttribute('name', name + '_' + playerName)
                }

        }
        console.log(form.action)
        form.submit()

    }
    let button = document.querySelector('[type="submit"]')
    button.addEventListener('click', submit)
</script>


<script>

    addPlayer()

</script>



{% endblock %}
